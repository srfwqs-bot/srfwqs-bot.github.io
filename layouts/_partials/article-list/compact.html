<article>
    <a href="{{ .RelPermalink }}">
        <div class="article-details">
            <h2 class="article-title">
                {{- .Title -}}
            </h2>
            <footer class="article-time">
                <time datetime='{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}'>
                    {{- .Date | time.Format (or .Site.Params.dateFormat.published "Jan 02, 2006") -}}
                </time>
            </footer>
        </div>

        {{- $image := partial "helper/image" (dict "Image" .Params.image "Resources" .Resources) -}}
        {{- $imgMatches := findRE `(?is)<img[^>]+src=["'][^"']+["'][^>]*>` .Content 1 -}}
        {{- $fallbackSrc := "" -}}
        {{- if gt (len $imgMatches) 0 -}}
            {{- $fallbackSrc = replaceRE `(?is).*src=["']([^"']+)["'].*` "$1" (index $imgMatches 0) -}}
        {{- end -}}
        {{ if or $image $fallbackSrc }}
        <div class="article-image">
            {{ if $image }}
            <img src="{{ $image.Permalink }}" width="{{ $image.Width }}" height="{{ $image.Height }}" alt="{{ .Title }}" loading="lazy" referrerpolicy="no-referrer">
            {{ else }}
            <img src="{{ $fallbackSrc }}" alt="{{ .Title }}" loading="lazy" referrerpolicy="no-referrer">
            {{ end }}
        </div>
        {{ end }}
    </a>
    <div class="article-cta-row compact-cta">
        <a class="article-cta" href="{{ printf "https://tv.srfwq.top/?q=%s" (.Title | urlquery) }}" target="_blank" rel="noopener noreferrer">立即观看</a>
    </div>
</article>
